# ğŸ“ CampusKnowledgeBase (CK Base)

[![Python](https://img.shields.io/badge/Python-3.9+-3776ab?logo=python&logoColor=white)](https://www.python.org/)
[![Flask](https://img.shields.io/badge/Flask-2.0+-000000?logo=flask&logoColor=white)](https://flask.palletsprojects.com/)
[![Next.js](https://img.shields.io/badge/Next.js-13+-000000?logo=next.js&logoColor=white)](https://nextjs.org/)
[![Gemini API](https://img.shields.io/badge/Gemini-API-4285F4?logo=google&logoColor=white)](https://ai.google.dev/)
[![FAISS](https://img.shields.io/badge/FAISS-Vector%20Search-FFD700)](https://faiss.ai/)
[![Google OAuth](https://img.shields.io/badge/Google%20OAuth-Auth-4285F4?logo=google&logoColor=white)](https://developers.google.com/identity)

---

## ğŸ¯ One-Liner
> **Elevating Campus Learning through Retrieval-Augmented Generation.** CK Base is a high-performance AI assistant that synthesizes course materials into cited, verifiable answers for university students.

---
## ğŸš¨ The Problem
Students face massive information overload during exam prep, with hundreds of pages of fragmented PDFs across various platforms.
* **Unverifiability:** General LLMs often hallucinate facts not present in the official syllabus.
* **Speed:** Manually searching through 100+ page PDFs for a single concept is inefficient.
* **Accuracy:** Academic queries require precise grounding in verified institutional data.

**CampusKnowledgeBase** provides an official "Source of Truth" by grounding Gemini AI in your university's specific curriculum.
---

## âœ¨ Key Features
* **âš¡ Sub-Millisecond Retrieval:** Leveraging FAISS for low-latency semantic search across thousands of document fragments.
* **ğŸ“Š Accuracy Scoring:** Every response includes an **Accuracy Score (0-1)**, generated by a secondary LLM "judge" checking for grounding.
* **ğŸ“… Semester-Aware Filtering:** Metadata-locked retrieval ensures answers are specific to the student's current year (FY/SY) and semester.
* **ğŸ›¡ï¸ Institutional Security:** Integrated with **Google OAuth 2.0**, restricted to verified university domains.
* **ğŸ“ Precision Citations:** Automatic references to the specific PDF and subject used to generate the answer.

---

## ğŸ› ï¸ Tech Stack

| Component | Technology | Purpose |
|-----------|-----------|---------|
| **Backend API** | Flask + Python | REST API, RAG orchestration |
| **AI/ML** | Google Gemini API | LLM for answer generation & evaluation |
| **Embeddings** | Google Text Embeddings | Semantic text representation |
| **Vector Database** | FAISS | Sub-millisecond similarity search |
| **Frontend** | Next.js + TypeScript | Interactive chat UI |
| **Authentication** | Google OAuth 2.0 | Secure student sign-in |
| **Infrastructure** | Flask Dev Server | Can be deployed on Cloud Run |
| **Data** | Campus course PDFs | Processed into chunks + embeddings |

---

## ğŸš€ Getting Started

### Prerequisites

Ensure you have the following installed:

- **Python**: 3.9 or higher
- **Node.js**: 16+ (for frontend)
- **pip**: Python package manager
- **npm/yarn**: Node package manager
- **Git**: Version control

### Environment Setup

Create a `.env` file in the root directory with the following variables:

```env
# Google Gemini API
GEMINI_API_KEY=your_gemini_api_key_here

# Flask Configuration
FLASK_SECRET_KEY=your_secret_key_here
FLASK_ENV=development

# Frontend URL (for CORS)
FRONTEND_URL=http://localhost:3000

# Google OAuth (optional, for auth)
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
```

### Installation Steps

#### 1ï¸âƒ£ Clone the Repository

```bash
git clone https://github.com/SohaKhare/CampusKnowledgeBase.git
cd CampusKnowledgeBase
```

#### 2ï¸âƒ£ Backend Setup (Python + Flask)

```bash
# Navigate to backend
cd aiml

# Initialize and sync the virtual environment (.venv)
uv sync

# Activate the virtual environment
source .venv/bin/activate  # On Windows: .venv\Scripts\activate

# Start Flask server
uv run main.py
```

Server runs at: `http://localhost:8000`

#### 3ï¸âƒ£ Frontend Setup (Next.js)

```bash
# Navigate to frontend
cd frontend

# Install dependencies
npm install  # or yarn install

# Start development server
npm run dev  # or yarn dev
```

Frontend runs at: `http://localhost:3000`

---

## ğŸ“ Project Structure

```
CampusKnowledgeBase/
â”œâ”€â”€ .gitignore               # Root ignore file (node_modules, .venv, .env)
â”œâ”€â”€ README.md                # The main documentation file (Paste content here)
â”‚
â”œâ”€â”€ aiml/                    # AI/ML Backend (Flask)
â”‚   â”œâ”€â”€ .venv/               # Virtual environment (managed by uv)
â”‚   â”œâ”€â”€ data/                # Institutional Knowledge (PDFs)
â”‚   â”‚   â”œâ”€â”€ FY/              # First Year materials
â”‚   â”‚   â””â”€â”€ SY/              # Second Year materials
â”‚   â”œâ”€â”€ ingestion/           # Pipeline to process PDFs into vectors
â”‚   â”‚   â”œâ”€â”€ ingest.py        # Main script to run indexing
â”‚   â”‚   â””â”€â”€ chunker.py       # PDF splitting logic
â”‚   â”œâ”€â”€ routes/              # Flask Blueprints for API endpoints
â”‚   â”‚   â”œâ”€â”€ auth_routes.py   # Google OAuth logic
â”‚   â”œâ”€â”€ askllm.py            # Gemini API integration & Scoring logic
â”‚   â”œâ”€â”€ rag.py               # FAISS retrieval logic
â”‚   â”œâ”€â”€ config.py            # Environment & app configuration
â”‚   â”œâ”€â”€ embedder.py          # Vector embedding generation (Google AI)
â”‚   â”œâ”€â”€ extensions.py        # Shared Flask extensions (DB, Auth, etc.)
â”‚   â”œâ”€â”€ pyproject.toml       # uv dependency management file
â”‚   â””â”€â”€ main.py              # Backend entry point
â”‚
â””â”€â”€ frontend/                # Next.js Frontend
    â”œâ”€â”€ public/              # Static assets (logos, icons)
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ app/             # Next.js App Router (pages)
    â”‚   â”œâ”€â”€ components/      # UI components (Chat, Sidebar, Navbar)
    â”‚   â”œâ”€â”€ lib/             # Utility functions (API callers)
    â”‚   â””â”€â”€ types/           # TypeScript interface definitions
    â”œâ”€â”€ .env.local           # Frontend environment variables
    â”œâ”€â”€ package.json         # Node.js dependencies
    â””â”€â”€ next.config.ts       # Next.js configuration
```

---

## ğŸ“Š How Accuracy Scoring Works

To eliminate AI hallucinations, we implement a **Self-Correction Loop**:

- **Retrieval**  
  The system performs a semantic search to fetch the most relevant content chunks from the local `data/` store based on the studentâ€™s query.

- **Verification**  
  Gemini cross-checks the generated answer against the retrieved chunks, ensuring that every statement is grounded in the original source material.

- **Confidence Check**  
  A **grounding score** (ranging from **0.0 to 1.0**) is generated. If the score falls below a predefined threshold, the UI warns the student and encourages cross-verification using the cited PDF sources.

---

## ğŸ“§ Contact & Support

Have questions or found a bug? Open an [issue](https://github.com/SohaKhare/CampusKnowledgeBase/issues) or reach out to us!

**Built with â¤ï¸ by Saish, Shaurya, Soha and Bhoumik.**
